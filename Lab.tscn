[gd_scene load_steps=24 format=2]

[ext_resource path="res://gameplay/crates/obj_crate_nitro.tscn" type="PackedScene" id=1]
[ext_resource path="res://gameplay/obj_item_aku.tscn" type="PackedScene" id=2]
[ext_resource path="res://gameplay/crates/obj_crate_checkpoint.tscn" type="PackedScene" id=3]
[ext_resource path="res://gameplay/obj_Character.tscn" type="PackedScene" id=4]
[ext_resource path="res://gameplay/crates/obj_crate_wood_jump.tscn" type="PackedScene" id=5]
[ext_resource path="res://Debug/DebugText.tscn" type="PackedScene" id=6]
[ext_resource path="res://gameplay/crates/obj_crate_bounce.tscn" type="PackedScene" id=7]
[ext_resource path="res://scripts/gameplay/GameplayCamera.gd" type="Script" id=8]
[ext_resource path="res://textures/lv_toadvillage/tex_ground.png" type="Texture" id=9]
[ext_resource path="res://gameplay/crates/obj_crate_enforced.tscn" type="PackedScene" id=10]
[ext_resource path="res://gameplay/crates/obj_crate_question.tscn" type="PackedScene" id=11]
[ext_resource path="res://gameplay/crates/obj_crate_life.tscn" type="PackedScene" id=12]
[ext_resource path="res://gameplay/crates/obj_crate_simple.tscn" type="PackedScene" id=13]
[ext_resource path="res://gameplay/crates/obj_crate_aku.tscn" type="PackedScene" id=14]
[ext_resource path="res://textures/gameplay/boxes-tnt-jp.png" type="Texture" id=15]
[ext_resource path="res://gameplay/crates/obj_crate_tnt.tscn" type="PackedScene" id=16]
[ext_resource path="res://gameplay/obj_item_clock.tscn" type="PackedScene" id=17]
[ext_resource path="res://gui/gameplay/GUI_Clock.tscn" type="PackedScene" id=18]
[ext_resource path="res://gameplay/crates/obj_crate_time.tscn" type="PackedScene" id=19]

[sub_resource type="SpatialMaterial" id=1]
albedo_texture = ExtResource( 9 )
uv1_scale = Vector3( 20, 20, 1 )

[sub_resource type="PlaneMesh" id=2]
material = SubResource( 1 )
size = Vector2( 3, 3 )

[sub_resource type="ConcavePolygonShape" id=3]
data = PoolVector3Array( 1.5, 0, 1.5, -1.5, 0, 1.5, 1.5, 0, -1.5, -1.5, 0, 1.5, -1.5, 0, -1.5, 1.5, 0, -1.5 )

[sub_resource type="GDScript" id=4]
script/source = "extends Crate

var health:int = 5

func decrease_health():
	health -= 1
	character.iventory.add_wumpa(2)
	$Anim.play(\"bounce\")
	print(\"bounce\")
	$sfx_bounce.play()
	$sfx_bounce.pitch_scale += 0.02
	if (health <= 0):
		_on_Attacked()

func _on_Attacked():
	$model.visible = false
	$CollisionShape.disabled = true
	$Particle.emitting = true
	$sfx_crate.play()
	yield(get_tree().create_timer($sfx_crate.stream.get_length(),false),\"timeout\")
	queue_free()
	
func _on_Jumped():
	print(\"jumped\")
	decrease_health()
	

"

[node name="Lab" type="Spatial" groups=[
"scene",
]]

[node name="HUD" type="Control" parent="."]
margin_right = 40.0
margin_bottom = 40.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="GUI_Clock" parent="HUD" groups=[
"hud",
] instance=ExtResource( 18 )]
visible = false
margin_left = -10.0702
margin_top = 367.054
margin_right = -10.0702
margin_bottom = 443.054

[node name="obj_crate_time" parent="HUD/GUI_Clock" instance=ExtResource( 19 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -5.96987, 0.217421, 3.4736 )

[node name="DebugText" parent="." instance=ExtResource( 6 )]

[node name="Button2" type="Button" parent="."]
margin_left = 213.0
margin_top = 4.0
margin_right = 281.0
margin_bottom = 33.0
focus_mode = 0
enabled_focus_mode = 0
text = "Respawn"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button3" type="Button" parent="."]
margin_left = 213.0
margin_top = 33.0
margin_right = 285.0
margin_bottom = 62.0
focus_mode = 0
enabled_focus_mode = 0
text = "Decrease"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Camera" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -3.21982, 3.69873, 8.73469 )
size = 7.79504
script = ExtResource( 8 )

[node name="obj_Character" parent="." instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4.35639, 0.54602, 2.58163 )
collision_mask = 190
use_debugger = true

[node name="Level" type="Spatial" parent="."]
transform = Transform( 1.01525, 0, 0, 0, 1.01525, 0, 0, 0, 1.01525, 0, 0, 0 )

[node name="MeshInstance" type="MeshInstance" parent="Level"]
transform = Transform( 9.13981, 0, 0, 0, 9.13981, 0, 0, 0, 9.13981, -0.00161552, 0.0171592, 0.0097127 )
mesh = SubResource( 2 )
material/0 = null

[node name="StaticBody" type="StaticBody" parent="Level/MeshInstance"]
collision_layer = 17

[node name="CollisionShape" type="CollisionShape" parent="Level/MeshInstance/StaticBody"]
shape = SubResource( 3 )

[node name="obj_item_aku" parent="Level" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.88368, 0.319266, -7.68546 )

[node name="obj_item_aku2" parent="Level" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 3.33408, 0.319266, -6.67051 )

[node name="obj_item_aku3" parent="Level" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.51824, 0.319266, -6.60693 )

[node name="obj_crate_nitro" parent="Level" instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2.4084, 0.217159, -1.93808 )

[node name="obj_crate_nitro2" parent="Level" instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -7.13955, 0.217159, -1.58752 )

[node name="obj_crate_nitro3" parent="Level" instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2.86045, 0.217159, 1.41248 )

[node name="obj_crate_nitro4" parent="Level" instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2.86045, 0.217159, 4.41248 )

[node name="obj_crate_nitro5" parent="Level" instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -9.04433, 0.217159, 4.33093 )

[node name="obj_crate_nitro6" parent="Level" instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4.8563, 0.217159, 6.50918 )

[node name="obj_crate_nitro7" parent="Level" instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 7.25034, 0.217159, -0.157588 )

[node name="obj_crate_bounce" parent="Level" instance=ExtResource( 7 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2.00927, 0.217159, 2.994 )
script = SubResource( 4 )

[node name="obj_crate_checkpoint" parent="Level" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.783866, 0.21716, 5.88085 )

[node name="obj_crate_wood_jump" parent="Level" instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -5.22165, 0.217159, 0.768173 )

[node name="obj_crate_simple" parent="Level" instance=ExtResource( 13 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.734314, 0.21716, 4.18282 )

[node name="obj_crate_question" parent="Level" instance=ExtResource( 11 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2.75651, 0.21716, 0.83259 )

[node name="obj_crate_life" parent="Level" instance=ExtResource( 12 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -5.62224, 0.217159, -4.0079 )

[node name="obj_crate_enforced" parent="Level" instance=ExtResource( 10 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.299033, 0.217159, -3.05081 )

[node name="obj_crate_simple2" parent="Level" instance=ExtResource( 14 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2.33509, 0.217159, -2.90587 )

[node name="obj_crate_tnt" parent="Level" instance=ExtResource( 16 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -7.12278, 0.214154, -0.0171937 )
use_jp_material = true
jp_texture = ExtResource( 15 )

[node name="obj_item_clock" parent="." instance=ExtResource( 17 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4.21561, 0.217421, -1.28501 )
[connection signal="pressed" from="Button2" to="obj_Character" method="_on_Button2_pressed"]
[connection signal="pressed" from="Button3" to="obj_Character" method="_on_Button3_pressed"]

[editable path="DebugText"]
